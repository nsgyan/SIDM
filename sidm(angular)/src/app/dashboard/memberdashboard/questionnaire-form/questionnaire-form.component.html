<div class="topHeader">
  <h2> Questionnaire </h2>
</div>

<form [formGroup]="questionnaireForm">
  <mat-stepper #stepper>
    <div formArrayName="aissment">
      <div *ngFor=" let controlName of nameAissment.controls; let i = index" [formGroupName]="i">
        <mat-step  errorMessage="Name is required.">
         
          <h2>{{questionnaireData[i].parameter}}</h2>
          <mat-form-field *ngIf="questionnaireData[i].inputType==='singleSelect'" appearance="fill">
            <mat-label>Answer Type</mat-label>
            <mat-select formControlName="answer" >
        <mat-option *ngFor="let option of questionnaireData[i].options" value="{{option.answer}}" >{{option.answer}} </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field *ngIf="questionnaireData[i].inputType==='multiSelect'" appearance="fill">
            <mat-label>Answer Type</mat-label>
            <mat-select formControlName="answer" multiple >
        <mat-option *ngFor="let option of questionnaireData[i].options" value="{{option.answer}}" >{{option.answer}} </mat-option>
            </mat-select>
          </mat-form-field>
          <br>
          <mat-form-field *ngIf="questionnaireData[i].textBox" appearance="fill">
            <mat-label></mat-label>
            <input matInput  formControlName="description" required>
          </mat-form-field>
          <div *ngIf="questionnaireData[i].upload" appearance="fill">
           
            <input type="file"   (change)="changeListener($event,i)" required>
          </div>
          <div>
         
            <button *ngIf="i!==0" mat-button matStepperPrevious>Back</button>
            <button mat-button matStepperNext>Next</button>
          
          </div>
    
      </mat-step>
      </div>
    </div>
   
   
    
    <mat-step>
      <ng-template matStepLabel>Done</ng-template>
      <p>You are now done.</p>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button (click)="submitQuestionnaire()">Submit</button>
      </div>
    </mat-step>
  </mat-stepper>
  
</form>


<!-- <div class="questionnaireForm">

  <form [formGroup]="questionnaireForm">
    <table class="table">
      <thead class="thead-dark">
        <tr>
          <th scope="col">Qs.</th>
          <th scope="col">Questions</th>
          <th scope="col">Answers</th>
        </tr>
      </thead>
      <tbody formArrayName="aissment">
        <tr *ngFor=" let controlName of nameAissment.controls; let i = index" [formGroupName]="i">
          <th scope="row">{{i+1}}</th>
          <td class="">{{questionnaireData[i].parameter}}</td>
          <td style="width:100px; overflow:hidden">

            <select class="paymentsDropdwn  select" [ngStyle]="{'border':submited ?  ' 1px solid #FF0000' :  '  1px solid #363a7a'}"
              formControlName="answer">
              <option *ngFor="let option of questionnaireData[i].options" value="{{option.answer}}">{{option.answer}}
              </option>
            </select>
            <p class="mb-2" style="color: red;" *ngIf="controlName.get('answer')?.hasError('required') &&(submited)">
              Please select one option
            </p>
    
          </td>
        </tr>


      </tbody>
    </table>
  </form>

  <button class="paymentsDropdwn" (click)="submitQuestionnaire()">Submit</button>
</div> -->

<!-- 
<div *ngFor=" let controlName of nameAissment.controls; let i = index"
[formGroupName]="i">


<input type="text" class="mt-4 mb-2 addInputBox" formControlName="name"> -->


<!-- <button *ngIf='i!==0' (click)="removeRegisteredOrganization(i)">Remove Registered  Organization</button>
-->