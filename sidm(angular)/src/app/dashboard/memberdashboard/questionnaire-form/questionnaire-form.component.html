


<div class="topHeader">
  <h2> Questionnaire </h2>
</div>


<!-- <div class="container mt-5">
  <div class="row d-flex justify-content-center align-items-center">
      <div class="col-md-6">
          <form id="regForm">
              <h1 id="register">Donate</h1>
              <div class="all-steps" id="all-steps"> <span class="step"></span> <span class="step"></span> <span
                      class="step"></span> <span class="step"></span> </div>
              <div class="tab">
                  <h3>Donation Type:</h3>
                  

              </div>
              <div class="tab">
                  sethrth

              </div>
              <div class="tab">
                  tshtr
              </div>

              <div class="thanks-message text-center" id="text-message"> <img
                      src="https://i.imgur.com/O18mJ1K.png" width="100" class="mb-4">
                  <h3>Thanks for your Donation!</h3> <span>Your donation has been entered! We will contact you
                      shortly!</span>
              </div>
              <div style="overflow:auto;" id="nextprevious">
                  <div style="float:right;"> <button type="button" id="prevBtn"
                          onclick="nextPrev(-1)">Previous</button> <button type="button" id="nextBtn"
                          onclick="nextPrev(1)">Next</button> </div>
              </div>
          </form>
      </div>
  </div>
</div> -->


<div class="container">
  <form [formGroup]="questionnaireForm">
    <mat-stepper #stepper>
   
      <div formArrayName="aissment" >
        <div *ngFor=" let controlName of nameAissment.controls; let i = index" [formGroupName]="i">
          <mat-step  errorMessage="Name is required.">
           
            <h2>{{questionnaireData[i].parameter}}</h2>
            <mat-form-field *ngIf="questionnaireData[i].inputType==='dropdown'" appearance="fill">
              <mat-label>Answer Type</mat-label>
              <mat-select formControlName="answer" >
          <mat-option *ngFor="let option of questionnaireData[i].options" value="{{option.answer}}" >{{option.answer}} </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field *ngIf="questionnaireData[i].inputType==='multiSelect'" appearance="fill">
              <mat-label>Answer Type</mat-label>
              <mat-select formControlName="answer" multiple >
          <mat-option *ngFor="let option of questionnaireData[i].options" value="{{option.answer}}" >{{option.answer}} </mat-option>
              </mat-select>
            </mat-form-field>
            <br>
            <mat-form-field *ngIf="questionnaireData[i].textBox" appearance="fill">
              <mat-label></mat-label>
              <input matInput placeholder="Last name, First name" formControlName="description" required>
            </mat-form-field>
            <div *ngIf="questionnaireData[i].upload" appearance="fill">
             
              <input type="file"   (change)="changeListener($event,i)" required>
            </div>
            <div>
              
              <button mat-button matStepperNext class="RegistrationBtn">Next</button>
              <button *ngIf="i!==0" mat-button matStepperPrevious class="RegistrationBtn">Back</button>
            
            </div>
      
        </mat-step>
        </div>
      </div>
     
     
      
      <mat-step>
        <ng-template matStepLabel>Done</ng-template>
        <p>You are now done.</p>
        <div>
          <button mat-button (click)="submitQuestionnaire()" class="RegistrationBtn">Submit</button>
          <button mat-button matStepperPrevious class="RegistrationBtn">Back</button>
        </div>
      </mat-step>
    </mat-stepper>
    
  </form>
</div>


<!-- <div class="questionnaireForm">

  <form [formGroup]="questionnaireForm">
    <table class="table">
      <thead class="thead-dark">
        <tr>
          <th scope="col">Qs.</th>
          <th scope="col">Questions</th>
          <th scope="col">Answers</th>
        </tr>
      </thead>
      <tbody formArrayName="aissment">
        <tr *ngFor=" let controlName of nameAissment.controls; let i = index" [formGroupName]="i">
          <th scope="row">{{i+1}}</th>
          <td class="">{{questionnaireData[i].parameter}}</td>
          <td style="width:100px; overflow:hidden">

            <select class="paymentsDropdwn  select" [ngStyle]="{'border':submited ?  ' 1px solid #FF0000' :  '  1px solid #363a7a'}"
              formControlName="answer">
              <option *ngFor="let option of questionnaireData[i].options" value="{{option.answer}}">{{option.answer}}
              </option>
            </select>
            <p class="mb-2" style="color: red;" *ngIf="controlName.get('answer')?.hasError('required') &&(submited)">
              Please select one option
            </p>
    
          </td>
        </tr>


      </tbody>
    </table>
  </form>

  <button class="paymentsDropdwn" (click)="submitQuestionnaire()">Submit</button>
</div> -->

<!-- 
<div *ngFor=" let controlName of nameAissment.controls; let i = index"
[formGroupName]="i">


<input type="text" class="mt-4 mb-2 addInputBox" formControlName="name"> -->


<!-- <button *ngIf='i!==0' (click)="removeRegisteredOrganization(i)">Remove Registered  Organization</button>
-->


